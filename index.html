<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InternHub - Pro Assistant</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    
    <style>
        :root {
            --bg-dark: #0F172A;
            --accent-indigo: #6366F1;
            --accent-emerald: #10B981;
            --accent-premium: #F59E0B;
            --accent-purple: #8B5CF6;
            --glass-bg: rgba(255, 255, 255, 0.03);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--bg-dark);
            color: #F8FAFC;
            min-height: 100vh;
        }

        /* Premium body background */
        body.premium-mode {
            background: linear-gradient(135deg, #0F172A 0%, #1E1B4B 50%, #0F172A 100%);
        }

        .form-control {
            background: rgba(0, 0, 0, 0.2) !important;
            border: 1px solid var(--glass-border);
            color: #ffffff !important;
            border-radius: 14px;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            background: rgba(0, 0, 0, 0.4) !important;
            border-color: var(--accent-indigo);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
            outline: none;
        }

        .form-control::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        /* Premium card styling */
        .glass-card.premium-active {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.15), rgba(139, 92, 246, 0.15));
            border: 2px solid var(--accent-premium);
            box-shadow: 0 0 30px rgba(245, 158, 11, 0.2);
        }

        .premium-badge {
            background: linear-gradient(135deg, var(--accent-premium), var(--accent-purple));
            color: white;
            font-size: 0.7rem;
            font-weight: bold;
            padding: 4px 12px;
            border-radius: 20px;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            animation: glow 2s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 10px rgba(245, 158, 11, 0.5); }
            50% { box-shadow: 0 0 20px rgba(245, 158, 11, 0.8); }
        }

        .locked-feature {
            position: relative;
            filter: blur(3px);
            pointer-events: none;
            user-select: none;
        }

        .locked-feature::after {
            content: "üîí Premium Feature";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 12px 20px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: bold;
            color: var(--accent-premium);
            z-index: 10;
            white-space: nowrap;
            border: 2px solid var(--accent-premium);
        }

        /* Remove locked state when premium */
        .unlocked-feature {
            filter: none !important;
            pointer-events: auto !important;
            user-select: auto !important;
        }

        .unlocked-feature::after {
            display: none !important;
        }

        .bento-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
        }
        .bento-item-large { grid-column: span 2; grid-row: span 2; }
        .bento-item-wide { grid-column: span 2; }
        
        @media (max-width: 992px) { .bento-grid { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 576px) { 
            .bento-grid { grid-template-columns: 1fr; }
            .bento-item-large, .bento-item-wide { grid-column: span 1; }
        }

        .btn-indigo { 
            background: var(--accent-indigo); 
            color: white; 
            border-radius: 14px; 
            border: none; 
            padding: 10px 20px; 
            font-weight: 600; 
            transition: all 0.3s ease;
        }
        .btn-indigo:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(99, 102, 241, 0.3);
        }

        .btn-premium { 
            background: linear-gradient(135deg, #F59E0B, #8B5CF6); 
            color: white; 
            border-radius: 14px; 
            border: none; 
            padding: 12px 24px; 
            font-weight: 700;
            transition: transform 0.3s ease;
        }
        .btn-premium:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(245, 158, 11, 0.3);
        }

        .stat-badge { 
            font-size: 0.65rem; 
            text-transform: uppercase; 
            letter-spacing: 1.2px; 
            color: #94A3B8; 
        }
        .section-hidden { display: none; }
        .pointer { cursor: pointer; }
        
        .badge-skill {
            background: linear-gradient(135deg, var(--accent-emerald), #059669);
            padding: 6px 14px;
            border-radius: 100px;
            font-size: 0.75rem;
            margin: 4px;
            display: inline-flex;
            align-items: center;
        }

        .pricing-card {
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .pricing-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-indigo);
        }

        .feature-list {
            list-style: none;
            padding: 0;
        }

        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .feature-list li:last-child {
            border-bottom: none;
        }

        .feature-list .bi-check-circle {
            color: var(--accent-emerald);
            margin-right: 10px;
        }

        .feature-list .bi-x-circle {
            color: #EF4444;
            margin-right: 10px;
        }

        .payment-option {
            padding: 15px;
            border: 2px solid var(--glass-border);
            border-radius: 12px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .payment-option:hover {
            border-color: var(--accent-indigo);
            background: rgba(99, 102, 241, 0.1);
        }

        .payment-option.selected {
            border-color: var(--accent-emerald);
            background: rgba(16, 185, 129, 0.1);
        }

        /* Premium celebration animation */
        @keyframes celebrate {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }

        .premium-activated {
            animation: celebrate 0.5s ease-out;
        }

        /* Style untuk kontak yang diperbaiki */
        .contact-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 10px 12px;
            margin-bottom: 8px;
            border-left: 3px solid var(--accent-indigo);
            transition: all 0.3s ease;
        }

        .contact-item:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateX(5px);
        }

        .contact-name {
            font-weight: 600;
            font-size: 0.85rem;
            color: #E2E8F0;
            margin-bottom: 2px;
        }

        .contact-info {
            font-size: 0.75rem;
            color: #94A3B8;
        }

        .contact-empty {
            text-align: center;
            padding: 20px;
            color: #64748B;
        }

        .contact-empty i {
            font-size: 2rem;
            margin-bottom: 10px;
            opacity: 0.5;
        }
    </style>
</head>
<body>

    <!-- Navigation Bar -->
    <nav class="navbar navbar-dark pt-4 pb-4 section-hidden" id="main-nav">
        <div class="container">
            <span class="navbar-brand fw-bold fs-4">
                <i class="bi bi-layers-half me-2"></i>InternHub
                <span id="nav-premium-indicator"></span>
            </span>
            <div class="d-flex align-items-center gap-3">
                <div class="text-end d-none d-md-block">
                    <div id="nav-user-name" class="fw-bold small d-flex align-items-center gap-2">
                        <span>User</span>
                        <span id="user-tier-badge" class="badge bg-secondary">Free</span>
                    </div>
                    <div id="quote-display" class="text-secondary" style="font-size: 0.7rem;"></div>
                </div>
                <button class="btn btn-outline-info btn-sm rounded-pill px-3" onclick="showPricing()" id="upgrade-btn">
                    <i class="bi bi-gem me-1"></i>Upgrade
                </button>
                <button class="btn btn-outline-danger btn-sm rounded-pill px-3" onclick="logout()">Logout</button>
            </div>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="container pb-5">
        
        <!-- Authentication Section -->
        <section id="auth-section" class="mx-auto" style="max-width: 400px; margin-top: 100px;">
            <div class="glass-card">
                <h3 id="auth-title" class="fw-bold text-center mb-4 text-white">Hello!</h3>
                <div id="login-form">
                    <input type="email" id="login-email" class="form-control mb-3 py-2" placeholder="Email">
                    <input type="password" id="login-password" class="form-control mb-3 py-2" placeholder="Password">
                    <button class="btn btn-indigo w-100 py-3" onclick="login()">Masuk ke Dashboard</button>
                    <p class="text-center mt-3 small text-secondary">Baru di sini? <a href="#" class="text-info text-decoration-none" onclick="toggleAuth(false)">Daftar Akun</a></p>
                    <div class="text-center mt-3">
                        <button class="btn btn-outline-warning btn-sm w-100" onclick="showPricing()">
                            <i class="bi bi-gem me-2"></i>Lihat Paket Premium
                        </button>
                    </div>
                </div>
                <div id="register-form" class="section-hidden">
                    <input type="text" id="reg-name" class="form-control mb-3 py-2" placeholder="Nama Panggilan">
                    <input type="email" id="reg-email" class="form-control mb-3 py-2" placeholder="Email">
                    <input type="password" id="reg-password" class="form-control mb-3 py-2" placeholder="Password (Min. 6 Karakter)">
                    <button class="btn btn-indigo w-100 py-3" onclick="register()">Mulai Magang</button>
                    <p class="text-center mt-3 small text-secondary">Sudah ada akun? <a href="#" class="text-info text-decoration-none" onclick="toggleAuth(true)">Login</a></p>
                </div>
            </div>
        </section>

        <!-- Dashboard Section -->
        <section id="dashboard-section" class="section-hidden">
            <!-- Premium Welcome Banner (only shown for premium users) -->
            <div id="premium-banner" class="glass-card premium-active mb-4 section-hidden">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h5 class="fw-bold mb-1">
                            <i class="bi bi-stars text-warning me-2"></i>Premium Account Active
                        </h5>
                        <p class="mb-0 small" id="subscription-info">Membership valid until ...</p>
                    </div>
                    <div class="premium-badge">
                        <i class="bi bi-gem"></i> PRO
                    </div>
                </div>
            </div>

            <div class="row g-4 mb-4">
                <div class="col-6 col-md-3">
                    <div class="glass-card py-3" id="stat-logs-card">
                        <div class="stat-badge">Total Logs</div>
                        <h2 id="stat-logs" class="fw-bold mb-0">0</h2>
                        <small id="log-limit-text" class="text-warning"></small>
                    </div>
                </div>
                <div class="col-6 col-md-3">
                    <div class="glass-card py-3" id="stat-skills-card">
                        <div class="stat-badge">Skills</div>
                        <h2 id="stat-skills" class="fw-bold mb-0">0</h2>
                        <small id="skill-limit-text" class="text-warning"></small>
                    </div>
                </div>
                <div class="col-6 col-md-3">
                    <div class="glass-card py-3 border-info border-opacity-25">
                        <div class="stat-badge text-info">Days Left</div>
                        <h2 id="stat-days" class="fw-bold mb-0 text-info">0</h2>
                    </div>
                </div>
                <div class="col-6 col-md-3">
                    <div class="glass-card py-3">
                        <div class="stat-badge">Progress</div>
                        <h2 id="stat-pct" class="fw-bold mb-0">0%</h2>
                    </div>
                </div>
            </div>

            <div class="bento-grid">
                <!-- Progress Tracker -->
                <div class="glass-card bento-item-wide" id="progress-card">
                    <h6 class="fw-bold mb-3"><i class="bi bi-rocket-takeoff me-2"></i>Internship Progress</h6>
                    <div class="progress mb-3" style="height: 10px; background: rgba(255,255,255,0.05);">
                        <div id="tracker-bar" class="progress-bar progress-bar-striped progress-bar-animated" style="width: 0%; background: var(--accent-indigo);"></div>
                    </div>
                    <p id="tracker-text" class="small mb-0 text-secondary fw-semibold"></p>
                </div>

                <!-- Logbook -->
                <div class="glass-card bento-item-large d-flex flex-column" id="logbook-card">
                    <div class="d-flex justify-content-between mb-4">
                        <h6 class="fw-bold mb-0 text-white">Daily Logbook</h6>
                        <div>
                            <span class="badge bg-primary bg-opacity-25 text-info small pointer me-2" onclick="copyToClipboard()">Salin Semua</span>
                            <span id="log-limit-badge" class="badge bg-warning text-dark small">0/10</span>
                        </div>
                    </div>
                    <div class="mb-4">
                        <input type="text" id="log-task" class="form-control mb-2 py-2" placeholder="Judul tugas hari ini...">
                        <textarea id="log-desc" class="form-control mb-3 py-2" rows="2" placeholder="Ceritakan detail pengerjaannya..."></textarea>
                        <button class="btn btn-indigo w-100 py-2" onclick="addLog()">Simpan Aktivitas</button>
                    </div>
                    <div id="log-container" class="overflow-auto pe-2" style="max-height: 400px;"></div>
                </div>

                <!-- Analytics (Premium) -->
                <div class="glass-card locked-feature" id="analytics-card">
                    <h6 class="fw-bold mb-3 text-white"><i class="bi bi-graph-up me-2"></i>Advanced Analytics</h6>
                    <div class="mb-3">
                        <div class="mb-3">
                            <div class="d-flex justify-content-between mb-2">
                                <span class="small">Productivity Score</span>
                                <span class="small fw-bold text-warning">87%</span>
                            </div>
                            <div class="progress" style="height: 8px;">
                                <div class="progress-bar bg-warning" style="width: 87%"></div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <div class="d-flex justify-content-between mb-2">
                                <span class="small">Weekly Growth</span>
                                <span class="small fw-bold text-success">+12%</span>
                            </div>
                            <div class="progress" style="height: 8px;">
                                <div class="progress-bar bg-success" style="width: 75%"></div>
                            </div>
                        </div>
                        <p class="small text-secondary mb-0">üìà Kinerja Anda meningkat!</p>
                    </div>
                </div>

                <!-- Work Directory - BAGIAN YANG DIPERBAIKI -->
                <div class="glass-card" id="contacts-card">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h6 class="fw-bold mb-0 text-white">
                            <i class="bi bi-person-lines-fill me-2"></i>Work Directory
                        </h6>
                        <span id="contact-limit-badge" class="badge bg-warning text-dark small">0/5</span>
                    </div>
                    <div class="mb-3">
                        <input type="text" id="contact-name" class="form-control form-control-sm mb-2" placeholder="Nama Orang (contoh: Budi Santoso)">
                        <input type="text" id="contact-info" class="form-control form-control-sm mb-2" placeholder="Jabatan/Kontak (contoh: Mentor Magang)">
                        <button class="btn btn-indigo btn-sm w-100 rounded-pill" onclick="addContact()">
                            <i class="bi bi-person-plus me-1"></i>Tambah Kontak
                        </button>
                    </div>
                    <div id="contact-container" class="overflow-auto" style="max-height: 150px;"></div>
                </div>

                <!-- Skills -->
                <div class="glass-card" id="skills-card">
                    <h6 class="fw-bold mb-2 text-white">Skill Learned</h6>
                    <div class="input-group mb-3">
                        <input type="text" id="skill-input" class="form-control form-control-sm" placeholder="Contoh: Excel Expert">
                        <button class="btn btn-indigo btn-sm px-3" onclick="addSkill()"><i class="bi bi-plus-lg"></i></button>
                    </div>
                    <div id="skill-container"></div>
                </div>

                <!-- Export & Settings -->
                <div class="glass-card bento-item-wide d-flex flex-wrap align-items-center justify-content-between gap-3" id="settings-card">
                    <div class="d-flex gap-4">
                        <div>
                            <label class="stat-badge d-block mb-1">Mulai Magang</label>
                            <input type="date" id="start-date-input" class="form-control form-control-sm" onchange="updateProfile()">
                        </div>
                        <div>
                            <label class="stat-badge d-block mb-1 text-info">Total Hari</label>
                            <input type="number" id="duration-input" class="form-control form-control-sm border-info" onchange="updateProfile()" style="width: 100px;">
                        </div>
                        <div>
                            <label class="stat-badge d-block mb-1">Tier Akun</label>
                            <div id="user-tier" class="fw-bold text-warning">Free</div>
                        </div>
                    </div>
                    <div class="d-flex gap-2">
                        <button class="btn btn-success rounded-pill px-4 fw-bold" onclick="exportData()">
                            <i class="bi bi-download me-2"></i>Export
                        </button>
                        <button class="btn btn-premium rounded-pill px-4 fw-bold" onclick="showPricing()" id="upgrade-btn-2">
                            <i class="bi bi-gem me-2"></i>Upgrade
                        </button>
                    </div>
                </div>

                <!-- AI Coach (Premium) -->
                <div class="glass-card locked-feature" id="ai-coach-card">
                    <h6 class="fw-bold mb-3 text-white"><i class="bi bi-robot me-2"></i>AI Career Coach</h6>
                    <div class="mb-3">
                        <select class="form-select form-select-sm mb-2" id="ai-topic">
                            <option>Resume Review</option>
                            <option>Interview Prep</option>
                            <option>Career Path</option>
                            <option>Skill Recommendations</option>
                        </select>
                        <button class="btn btn-premium btn-sm w-100" onclick="generateAIAdvice()">
                            <i class="bi bi-magic me-2"></i>Get AI Advice
                        </button>
                    </div>
                    <div id="ai-output" class="p-3 rounded-3 small" style="background: rgba(0,0,0,0.3); min-height: 80px;">
                        <em class="text-secondary">AI akan memberikan saran karir personal...</em>
                    </div>
                </div>
            </div>
        </section>

        <!-- Pricing Section -->
        <section id="pricing-section" class="section-hidden mx-auto" style="max-width: 1000px;">
            <div class="text-center mb-5">
                <h2 class="fw-bold mb-3">Upgrade InternHub Experience</h2>
                <p class="text-secondary">Pilih paket yang sesuai dengan kebutuhan magang Anda</p>
                <button class="btn btn-outline-light btn-sm" onclick="backToDashboard()">
                    <i class="bi bi-arrow-left me-2"></i>Kembali ke Dashboard
                </button>
            </div>

            <div class="row g-4">
                <!-- Free Plan -->
                <div class="col-md-4">
                    <div class="glass-card pricing-card h-100">
                        <div class="text-center mb-4">
                            <h4 class="fw-bold">Free</h4>
                            <div class="display-4 fw-bold">Rp 0</div>
                            <p class="text-secondary">/selamanya</p>
                        </div>
                        <ul class="feature-list">
                            <li><i class="bi bi-check-circle"></i> 10 Logbook harian</li>
                            <li><i class="bi bi-check-circle"></i> 5 Kontak kerja</li>
                            <li><i class="bi bi-check-circle"></i> 8 Skill tracking</li>
                            <li><i class="bi bi-x-circle"></i> Analytics lanjutan</li>
                            <li><i class="bi bi-x-circle"></i> AI Career Coach</li>
                            <li><i class="bi bi-x-circle"></i> Export PDF & Excel</li>
                        </ul>
                        <button class="btn btn-outline-light w-100 mt-4" disabled>Paket Saat Ini</button>
                    </div>
                </div>

                <!-- Pro Monthly -->
                <div class="col-md-4">
                    <div class="glass-card pricing-card h-100" style="border: 2px solid var(--accent-premium);">
                        <div class="text-center mb-4">
                            <span class="badge bg-warning text-dark mb-2">POPULER</span>
                            <h4 class="fw-bold">Pro Monthly</h4>
                            <div class="display-4 fw-bold">Rp 49K</div>
                            <p class="text-secondary">/bulan</p>
                        </div>
                        <ul class="feature-list">
                            <li><i class="bi bi-check-circle"></i> Logbook unlimited</li>
                            <li><i class="bi bi-check-circle"></i> Kontak unlimited</li>
                            <li><i class="bi bi-check-circle"></i> Skill unlimited</li>
                            <li><i class="bi bi-check-circle"></i> Analytics lanjutan</li>
                            <li><i class="bi bi-check-circle"></i> AI Career Coach</li>
                            <li><i class="bi bi-check-circle"></i> Export PDF & Excel</li>
                        </ul>
                        <button class="btn btn-premium w-100 mt-4" onclick="selectPlan('pro_monthly')">Pilih Paket</button>
                    </div>
                </div>

                <!-- Pro Annual -->
                <div class="col-md-4">
                    <div class="glass-card pricing-card h-100">
                        <div class="text-center mb-4">
                            <h4 class="fw-bold">Pro Annual</h4>
                            <div class="display-4 fw-bold">Rp 450K</div>
                            <p class="text-secondary">/tahun <span class="text-success">(Hemat 23%)</span></p>
                        </div>
                        <ul class="feature-list">
                            <li><i class="bi bi-check-circle"></i> Semua fitur Pro Monthly</li>
                            <li><i class="bi bi-check-circle"></i> Cloud backup otomatis</li>
                            <li><i class="bi bi-check-circle"></i> Template premium</li>
                            <li><i class="bi bi-check-circle"></i> Portfolio builder</li>
                            <li><i class="bi bi-check-circle"></i> Job matching</li>
                            <li><i class="bi bi-check-circle"></i> 24/7 Support</li>
                        </ul>
                        <button class="btn btn-premium w-100 mt-4" onclick="selectPlan('pro_annual')">Pilih Paket</button>
                    </div>
                </div>
            </div>

            <!-- Payment Methods Info -->
            <div class="glass-card mt-5">
                <h5 class="fw-bold mb-3">Pembayaran Aman & Mudah</h5>
                <div class="row text-center">
                    <div class="col-3">
                        <i class="bi bi-shield-check display-6 text-success"></i>
                        <p class="small mt-2">SSL Secure</p>
                    </div>
                    <div class="col-3">
                        <i class="bi bi-credit-card display-6 text-info"></i>
                        <p class="small mt-2">Kartu Kredit</p>
                    </div>
                    <div class="col-3">
                        <i class="bi bi-wallet2 display-6 text-warning"></i>
                        <p class="small mt-2">E-Wallet</p>
                    </div>
                    <div class="col-3">
                        <i class="bi bi-bank display-6 text-primary"></i>
                        <p class="small mt-2">Transfer Bank</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Payment Section -->
        <section id="payment-section" class="section-hidden mx-auto" style="max-width: 500px;">
            <div class="glass-card">
                <button class="btn btn-outline-light btn-sm mb-4" onclick="backToPricing()">
                    <i class="bi bi-arrow-left me-2"></i>Kembali
                </button>
                <h4 class="fw-bold mb-4" id="selected-plan-title">Pro Monthly</h4>
                
                <!-- Payment Methods -->
                <div class="mb-4">
                    <label class="form-label mb-3">Pilih Metode Pembayaran</label>
                    <div class="payment-option" data-method="credit_card" onclick="selectPaymentMethod('credit_card')">
                        <div class="d-flex align-items-center">
                            <i class="bi bi-credit-card fs-4 me-3 text-info"></i>
                            <div>
                                <h6 class="mb-0">Kartu Kredit/Debit</h6>
                                <small class="text-secondary">Visa, Mastercard, JCB</small>
                            </div>
                        </div>
                    </div>
                    
                    <div class="payment-option" data-method="gopay" onclick="selectPaymentMethod('gopay')">
                        <div class="d-flex align-items-center">
                            <i class="bi bi-wallet fs-4 me-3 text-success"></i>
                            <div>
                                <h6 class="mb-0">GoPay</h6>
                                <small class="text-secondary">Dompet digital</small>
                            </div>
                        </div>
                    </div>
                    
                    <div class="payment-option" data-method="bank" onclick="selectPaymentMethod('bank')">
                        <div class="d-flex align-items-center">
                            <i class="bi bi-bank fs-4 me-3 text-primary"></i>
                            <div>
                                <h6 class="mb-0">Transfer Bank</h6>
                                <small class="text-secondary">BCA, Mandiri, BRI</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Payment Summary -->
                <div class="mb-4 p-3 rounded-3" style="background: rgba(255,255,255,0.05);">
                    <div class="d-flex justify-content-between mb-2">
                        <span>Harga Paket</span>
                        <span id="plan-price">Rp 49.000</span>
                    </div>
                    <div class="d-flex justify-content-between mb-2">
                        <span>PPN 10%</span>
                        <span id="tax-amount">Rp 4.900</span>
                    </div>
                    <hr>
                    <div class="d-flex justify-content-between fw-bold fs-5">
                        <span>Total</span>
                        <span id="total-price" class="text-warning">Rp 53.900</span>
                    </div>
                </div>

                <!-- Terms -->
                <div class="form-check mb-4">
                    <input class="form-check-input" type="checkbox" id="terms-agree">
                    <label class="form-check-label small" for="terms-agree">
                        Saya setuju dengan <a href="#" class="text-info">Syarat & Ketentuan</a>
                    </label>
                </div>

                <!-- Pay Button -->
                <button class="btn btn-premium w-100 py-3" onclick="processPayment()">
                    <i class="bi bi-lock-fill me-2"></i>Bayar Sekarang
                </button>
            </div>
        </section>
    </div>

    <script>
        // Data initialization
        let users = JSON.parse(localStorage.getItem('internhub_users')) || [];
        let currentUser = JSON.parse(localStorage.getItem('internhub_session')) || null;
        let logs = [], contacts = [], skills = [];
        let selectedPlan = null;
        let selectedPaymentMethod = 'credit_card';

        const FREE_LIMITS = {
            logs: 10,
            contacts: 5,
            skills: 8
        };

        const PRICING = {
            free: { name: 'Free', price: 0, period: 'forever' },
            pro_monthly: { name: 'Pro Monthly', price: 49000, period: '30', duration_days: 30 },
            pro_annual: { name: 'Pro Annual', price: 450000, period: '365', duration_days: 365 }
        };

        const quotes = [
            "Make every day count.", 
            "Small steps, big results.", 
            "Stay focused, stay humble."
        ];

        // Initialize app
        window.onload = () => {
            if (currentUser) {
                showDashboard();
            }
            document.getElementById('quote-display').innerText = quotes[Math.floor(Math.random() * quotes.length)];
        };

        function toggleAuth(isLogin) {
            document.getElementById('login-form').classList.toggle('section-hidden', !isLogin);
            document.getElementById('register-form').classList.toggle('section-hidden', isLogin);
            document.getElementById('auth-title').innerText = isLogin ? 'Welcome Back!' : 'Join InternHub';
        }

        function register() {
            const name = document.getElementById('reg-name').value;
            const email = document.getElementById('reg-email').value;
            const pass = document.getElementById('reg-password').value;
            
            if (!name || !email || pass.length < 6) {
                alert("Harap isi semua data! Password minimal 6 karakter.");
                return;
            }
            
            if (users.find(u => u.email === email)) {
                alert("Email sudah terdaftar!");
                toggleAuth(true);
                return;
            }
            
            const newUser = { 
                name, 
                email, 
                pass: btoa(pass), 
                startDate: new Date().toISOString().split('T')[0], 
                duration: 90,
                tier: 'free',
                subscription: null
            };
            
            users.push(newUser);
            localStorage.setItem('internhub_users', JSON.stringify(users));
            alert("‚úÖ Registrasi berhasil! Silakan login.");
            toggleAuth(true);
        }

        function login() {
            const email = document.getElementById('login-email').value;
            const pass = document.getElementById('login-password').value;
            const user = users.find(u => u.email === email && u.pass === btoa(pass));
            
            if (user) {
                currentUser = user;
                localStorage.setItem('internhub_session', JSON.stringify(user));
                showDashboard();
            } else {
                alert("‚ùå Email atau Password salah!");
            }
        }

        function logout() { 
            localStorage.removeItem('internhub_session'); 
            location.reload(); 
        }

        function showDashboard() {
            // Hide all sections
            document.getElementById('auth-section').classList.add('section-hidden');
            document.getElementById('pricing-section').classList.add('section-hidden');
            document.getElementById('payment-section').classList.add('section-hidden');
            
            // Show dashboard
            document.getElementById('main-nav').classList.remove('section-hidden');
            document.getElementById('dashboard-section').classList.remove('section-hidden');
            
            // Check if premium
            const isPremium = checkPremiumStatus();
            
            // Update UI based on tier
            updatePremiumUI(isPremium);
            
            // Update navbar
            const tierBadge = isPremium ? 
                '<span class="premium-badge"><i class="bi bi-gem"></i> PRO</span>' : 
                '<span class="badge bg-secondary">Free</span>';
            
            document.getElementById('nav-user-name').innerHTML = `
                <span>${currentUser.name}</span>
                ${tierBadge}
            `;
            
            // Load user data
            const key = currentUser.email.replace(/[@.]/g, '_');
            logs = JSON.parse(localStorage.getItem(`${key}_logs`)) || [];
            contacts = JSON.parse(localStorage.getItem(`${key}_contacts`)) || [];
            skills = JSON.parse(localStorage.getItem(`${key}_skills`)) || [];
            
            document.getElementById('start-date-input').value = currentUser.startDate;
            document.getElementById('duration-input').value = currentUser.duration;
            document.getElementById('user-tier').innerText = isPremium ? 'Premium' : 'Free';
            
            refreshUI();
        }

        function checkPremiumStatus() {
            if (!currentUser.subscription) return false;
            
            const endDate = new Date(currentUser.subscription.end_date);
            const now = new Date();
            
            if (now > endDate) {
                // Subscription expired
                currentUser.tier = 'free';
                currentUser.subscription = null;
                updateUserData();
                return false;
            }
            
            return true;
        }

        function updatePremiumUI(isPremium) {
            // Apply premium mode to body
            if (isPremium) {
                document.body.classList.add('premium-mode');
                
                // Show premium banner
                const banner = document.getElementById('premium-banner');
                banner.classList.remove('section-hidden');
                
                if (currentUser.subscription) {
                    const endDate = new Date(currentUser.subscription.end_date);
                    document.getElementById('subscription-info').textContent = 
                        `Active until ${endDate.toLocaleDateString('id-ID')}`;
                }
                
                // Add premium glow to cards
                ['progress-card', 'logbook-card', 'stat-logs-card', 'stat-skills-card'].forEach(id => {
                    const card = document.getElementById(id);
                    if (card) card.classList.add('premium-active');
                });
                
                // Unlock premium features
                unlockPremiumFeatures();
                
                // Hide upgrade buttons
                document.getElementById('upgrade-btn').classList.add('section-hidden');
                document.getElementById('upgrade-btn-2').classList.add('section-hidden');
                
                // Show premium indicator in nav
                document.getElementById('nav-premium-indicator').innerHTML = 
                    '<span class="premium-badge ms-2"><i class="bi bi-stars"></i></span>';
                
            } else {
                document.body.classList.remove('premium-mode');
                document.getElementById('premium-banner').classList.add('section-hidden');
                
                // Lock premium features
                lockPremiumFeatures();
                
                // Show upgrade buttons
                document.getElementById('upgrade-btn').classList.remove('section-hidden');
                document.getElementById('upgrade-btn-2').classList.remove('section-hidden');
                
                document.getElementById('nav-premium-indicator').innerHTML = '';
            }
        }

        function unlockPremiumFeatures() {
            // Unlock analytics and AI coach
            const premiumCards = ['analytics-card', 'ai-coach-card'];
            premiumCards.forEach(id => {
                const card = document.getElementById(id);
                if (card) {
                    card.classList.remove('locked-feature');
                    card.classList.add('unlocked-feature', 'premium-activated');
                }
            });
        }

        function lockPremiumFeatures() {
            const premiumCards = ['analytics-card', 'ai-coach-card'];
            premiumCards.forEach(id => {
                const card = document.getElementById(id);
                if (card) {
                    card.classList.add('locked-feature');
                    card.classList.remove('unlocked-feature', 'premium-activated');
                }
            });
        }

        function refreshUI() {
            const start = new Date(currentUser.startDate);
            start.setHours(0,0,0,0);
            const totalTargetDays = parseInt(currentUser.duration) || 1;
            const today = new Date();
            today.setHours(0,0,0,0);

            let elapsed = Math.floor((today - start) / 86400000);
            if (elapsed < 0) elapsed = 0;
            let remaining = totalTargetDays - elapsed;
            if (remaining < 0) remaining = 0;
            const pct = Math.min(100, Math.round((elapsed / totalTargetDays) * 100));

            document.getElementById('stat-logs').innerText = logs.length;
            document.getElementById('stat-skills').innerText = skills.length;
            document.getElementById('stat-days').innerText = remaining;
            document.getElementById('stat-pct').innerText = pct + '%';
            document.getElementById('tracker-bar').style.width = pct + '%';
            
            const isPremium = currentUser.tier !== 'free' && currentUser.subscription;
            
            // Update limit badges
            if (!isPremium) {
                document.getElementById('log-limit-badge').textContent = `${logs.length}/${FREE_LIMITS.logs}`;
                document.getElementById('log-limit-text').textContent = `(Max ${FREE_LIMITS.logs})`;
                document.getElementById('skill-limit-text').textContent = `(Max ${FREE_LIMITS.skills})`;
                document.getElementById('contact-limit-badge').textContent = `${contacts.length}/${FREE_LIMITS.contacts}`;
                document.getElementById('contact-limit-badge').className = contacts.length >= FREE_LIMITS.contacts ? 
                    'badge bg-danger text-white small' : 'badge bg-warning text-dark small';
            } else {
                document.getElementById('log-limit-badge').textContent = `${logs.length}/‚àû`;
                document.getElementById('log-limit-badge').className = 'badge bg-success text-white small';
                document.getElementById('log-limit-text').textContent = '(Unlimited)';
                document.getElementById('skill-limit-text').textContent = '(Unlimited)';
                document.getElementById('contact-limit-badge').textContent = `${contacts.length}/‚àû`;
                document.getElementById('contact-limit-badge').className = 'badge bg-success text-white small';
            }
            
            const tText = document.getElementById('tracker-text');
            if (today < start) {
                tText.innerHTML = `Mulai dalam ${Math.floor((start-today)/86400000)} hari`;
            } else if (elapsed >= totalTargetDays) {
                tText.innerHTML = `üéâ Target tercapai!`;
            } else {
                tText.innerText = `${elapsed}/${totalTargetDays} hari ‚Ä¢ ${remaining} hari tersisa`;
            }

            renderLogs();
            renderContacts();
            renderSkills();
        }

        function renderLogs() {
            const container = document.getElementById('log-container');
            if (logs.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-4 text-secondary">
                        <i class="bi bi-journal-check display-4 mb-2"></i>
                        <p class="small">Belum ada logbook</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = logs.map((l, i) => `
                <div class="p-3 mb-2 border border-secondary border-opacity-10 rounded-4 glass-card">
                    <div class="d-flex justify-content-between">
                        <span class="fw-bold text-info small">${l.task}</span>
                        <i class="bi bi-trash3 pointer text-danger opacity-50" onclick="deleteItem('log', ${i})"></i>
                    </div>
                    <div class="stat-badge mb-1" style="font-size:0.6rem">${l.date}</div>
                    <p class="small mb-0 opacity-75">${l.desc}</p>
                </div>
            `).join('');
        }

        // FUNGSI RENDER CONTACTS YANG DIPERBAIKI
        function renderContacts() {
            const container = document.getElementById('contact-container');
            
            if (!contacts || contacts.length === 0) {
                container.innerHTML = `
                    <div class="contact-empty">
                        <i class="bi bi-people"></i>
                        <p class="small mt-2">Belum ada kontak kerja</p>
                    </div>
                `;
                return;
            }

            // Perbaikan: Pastikan properti name dan info ada
            container.innerHTML = contacts.map((c, i) => {
                // Gunakan nilai default jika properti tidak ada
                const contactName = c.name || 'No Name';
                const contactInfo = c.info || 'No Information';
                
                return `
                    <div class="contact-item d-flex justify-content-between align-items-center">
                        <div>
                            <div class="contact-name">${contactName}</div>
                            <div class="contact-info">${contactInfo}</div>
                        </div>
                        <i class="bi bi-x-circle text-danger pointer" onclick="deleteItem('contact', ${i})" title="Hapus kontak"></i>
                    </div>
                `;
            }).join('');
        }

        function renderSkills() {
            const container = document.getElementById('skill-container');
            if (skills.length === 0) {
                container.innerHTML = '<div class="text-center py-3 text-secondary small">Belum ada skill</div>';
                return;
            }

            container.innerHTML = skills.map((s, i) => `
                <span class="badge-skill">${s} <i class="bi bi-x ms-2 pointer" onclick="deleteItem('skill', ${i})"></i></span>
            `).join('');
        }

        function addLog() {
            const isPremium = currentUser.tier !== 'free' && currentUser.subscription;
            
            if (!isPremium && logs.length >= FREE_LIMITS.logs) {
                alert(`‚ö†Ô∏è Limit ${FREE_LIMITS.logs} logbook tercapai! Upgrade ke Premium untuk unlimited.`);
                showPricing();
                return;
            }

            const task = document.getElementById('log-task').value.trim();
            const desc = document.getElementById('log-desc').value.trim();
            
            if (!task) {
                alert("Judul tugas tidak boleh kosong!");
                return;
            }
            
            logs.unshift({ 
                task, 
                desc, 
                date: new Date().toLocaleDateString('id-ID', {day:'numeric', month:'short', year:'numeric'})
            });
            
            save('logs', logs);
            document.getElementById('log-task').value = '';
            document.getElementById('log-desc').value = '';
        }

        // FUNGSI ADD CONTACT YANG DIPERBAIKI
        function addContact() {
            const isPremium = currentUser.tier !== 'free' && currentUser.subscription;
            
            // Cek limit untuk user free
            if (!isPremium && contacts.length >= FREE_LIMITS.contacts) {
                alert(`‚ö†Ô∏è Limit ${FREE_LIMITS.contacts} kontak tercapai! Upgrade ke Premium untuk unlimited.`);
                showPricing();
                return;
            }

            // Ambil nilai dari input
            const nameInput = document.getElementById('contact-name');
            const infoInput = document.getElementById('contact-info');
            
            const name = nameInput.value.trim();
            const info = infoInput.value.trim();
            
            // Validasi input
            if (!name) {
                alert("Nama tidak boleh kosong!");
                nameInput.focus();
                return;
            }
            
            if (!info) {
                alert("Info kontak tidak boleh kosong!");
                infoInput.focus();
                return;
            }
            
            // Tambahkan kontak dengan struktur yang benar
            contacts.push({ 
                name: name, 
                info: info,
                dateAdded: new Date().toLocaleDateString('id-ID')
            });
            
            // Simpan ke localStorage
            save('contacts', contacts);
            
            // Reset input fields
            nameInput.value = '';
            infoInput.value = '';
            
            // Focus kembali ke input nama
            nameInput.focus();
            
            // Tampilkan notifikasi
            alert(`‚úÖ Kontak "${name}" berhasil ditambahkan!`);
        }

        function addSkill() {
            const isPremium = currentUser.tier !== 'free' && currentUser.subscription;
            
            if (!isPremium && skills.length >= FREE_LIMITS.skills) {
                alert(`‚ö†Ô∏è Limit ${FREE_LIMITS.skills} skill tercapai! Upgrade ke Premium.`);
                showPricing();
                return;
            }

            const val = document.getElementById('skill-input').value.trim();
            
            if (!val) {
                alert("Skill tidak boleh kosong!");
                return;
            }
            
            skills.push(val);
            save('skills', skills);
            document.getElementById('skill-input').value = '';
        }

        function generateAIAdvice() {
            const topic = document.getElementById('ai-topic').value;
            const output = document.getElementById('ai-output');
            
            output.innerHTML = '<i class="bi bi-hourglass-split me-2"></i>Generating AI advice...';
            
            setTimeout(() => {
                const advice = {
                    'Resume Review': '‚ú® Resume Anda solid! Tambahkan metrics konkret di setiap achievement. Contoh: "Meningkatkan efisiensi proses 30%"',
                    'Interview Prep': 'üíº Tips: Siapkan STAR method untuk behavioral questions. Practice dengan teman, record yourself!',
                    'Career Path': 'üéØ Based on your skills, consider: Product Manager, Business Analyst, atau Project Coordinator roles.',
                    'Skill Recommendations': 'üìö Top skills to learn: Data Analysis (Excel/Python), Agile/Scrum, SQL basics, Presentation skills'
                };
                
                output.innerHTML = advice[topic] || 'Great job on your internship journey! Keep learning and growing.';
            }, 1500);
        }

        function save(k, d) {
            const key = currentUser.email.replace(/[@.]/g, '_');
            localStorage.setItem(`${key}_${k}`, JSON.stringify(d));
            refreshUI();
        }

        function deleteItem(type, i) {
            if (!confirm("Hapus data ini?")) return;
            
            if (type === 'log') {
                logs.splice(i, 1);
                save('logs', logs);
                alert('‚úÖ Logbook berhasil dihapus!');
            } else if (type === 'contact') {
                const deletedName = contacts[i].name || 'Kontak';
                contacts.splice(i, 1);
                save('contacts', contacts);
                alert(`‚úÖ Kontak "${deletedName}" berhasil dihapus!`);
            } else if (type === 'skill') {
                skills.splice(i, 1);
                save('skills', skills);
                alert('‚úÖ Skill berhasil dihapus!');
            }
        }

        function exportData() {
            let txt = `INTERNHUB REPORT - ${currentUser.name}\n`;
            txt += `${'='.repeat(50)}\n\n`;
            
            if (logs.length > 0) {
                txt += `LOGBOOK:\n${'-'.repeat(20)}\n`;
                logs.forEach((l, i) => {
                    txt += `[${i+1}] ${l.date}: ${l.task}\n   ${l.desc}\n\n`;
                });
            }
            
            if (contacts.length > 0) {
                txt += `KONTAK KERJA:\n${'-'.repeat(20)}\n`;
                contacts.forEach((c, i) => {
                    txt += `[${i+1}] ${c.name || 'No Name'}\n   ${c.info || 'No Info'}\n\n`;
                });
            }
            
            if (skills.length > 0) {
                txt += `SKILL YANG DIPELAJARI:\n${'-'.repeat(25)}\n`;
                skills.forEach((s, i) => {
                    txt += `${i+1}. ${s}\n`;
                });
            }
            
            const blob = new Blob([txt], { type: 'text/plain' });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = `InternHub_${currentUser.name}_${Date.now()}.txt`;
            a.click();
        }

        function copyToClipboard() {
            const txt = logs.map(l => `[${l.date}] ${l.task}: ${l.desc}`).join('\n');
            navigator.clipboard.writeText(txt).then(() => alert("‚úÖ Copied!"));
        }

        function updateProfile() {
            currentUser.startDate = document.getElementById('start-date-input').value;
            currentUser.duration = document.getElementById('duration-input').value;
            updateUserData();
            refreshUI();
        }

        function updateUserData() {
            const idx = users.findIndex(u => u.email === currentUser.email);
            if (idx !== -1) {
                users[idx] = currentUser;
                localStorage.setItem('internhub_users', JSON.stringify(users));
                localStorage.setItem('internhub_session', JSON.stringify(currentUser));
            }
        }

        function showPricing() {
            document.getElementById('auth-section').classList.add('section-hidden');
            document.getElementById('dashboard-section').classList.add('section-hidden');
            document.getElementById('payment-section').classList.add('section-hidden');
            document.getElementById('main-nav').classList.add('section-hidden');
            document.getElementById('pricing-section').classList.remove('section-hidden');
        }

        function selectPlan(plan) {
            selectedPlan = plan;
            document.getElementById('pricing-section').classList.add('section-hidden');
            document.getElementById('payment-section').classList.remove('section-hidden');
            
            const planData = PRICING[plan];
            const price = planData.price;
            const tax = Math.round(price * 0.1);
            const total = price + tax;
            
            document.getElementById('selected-plan-title').textContent = planData.name;
            document.getElementById('plan-price').textContent = `Rp ${price.toLocaleString('id-ID')}`;
            document.getElementById('tax-amount').textContent = `Rp ${tax.toLocaleString('id-ID')}`;
            document.getElementById('total-price').textContent = `Rp ${total.toLocaleString('id-ID')}`;
            
            // Reset selection
            document.querySelectorAll('.payment-option').forEach(opt => opt.classList.remove('selected'));
            document.querySelector('[data-method="credit_card"]').classList.add('selected');
        }

        function selectPaymentMethod(method) {
            selectedPaymentMethod = method;
            document.querySelectorAll('.payment-option').forEach(opt => opt.classList.remove('selected'));
            document.querySelector(`[data-method="${method}"]`).classList.add('selected');
        }

        function processPayment() {
            if (!document.getElementById('terms-agree').checked) {
                alert('Setujui Syarat & Ketentuan terlebih dahulu!');
                return;
            }
            
            if (!selectedPlan) {
                alert('Pilih paket terlebih dahulu!');
                return;
            }
            
            const planData = PRICING[selectedPlan];
            const paymentId = 'PAY-' + Math.random().toString(36).substr(2, 9).toUpperCase();
            
            // Calculate end date
            const endDate = new Date();
            endDate.setDate(endDate.getDate() + planData.duration_days);
            
            // Update user to premium
            currentUser.tier = 'premium';
            currentUser.subscription = {
                plan: selectedPlan,
                start_date: new Date().toISOString(),
                end_date: endDate.toISOString(),
                payment_method: selectedPaymentMethod,
                payment_id: paymentId
            };
            
            updateUserData();
            
            // Success message
            alert(`üéâ UPGRADE BERHASIL!\n\nPaket: ${planData.name}\nID: ${paymentId}\n\nSelamat menikmati fitur Premium!`);
            
            // Back to dashboard with premium UI
            backToDashboard();
        }

        function backToDashboard() {
            showDashboard();
        }

        function backToPricing() {
            showPricing();
        }
    </script>
</body>
</html>