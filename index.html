<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InternHub - Pro Assistant</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    
    <style>
        :root {
            --bg-dark: #0F172A;
            --accent-indigo: #6366F1;
            --accent-emerald: #10B981;
            --accent-premium: #F59E0B;
            --glass-bg: rgba(255, 255, 255, 0.03);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--bg-dark);
            color: #F8FAFC;
            min-height: 100vh;
        }

        .form-control {
            background: rgba(0, 0, 0, 0.2) !important;
            border: 1px solid var(--glass-border);
            color: #ffffff !important;
            border-radius: 14px;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            background: rgba(0, 0, 0, 0.4) !important;
            border-color: var(--accent-indigo);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
            outline: none;
        }

        .form-control::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 1.5rem;
        }

        .premium-card {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(139, 92, 246, 0.1));
            border: 2px solid var(--accent-premium);
            position: relative;
            overflow: hidden;
        }

        .premium-card::before {
            content: "PRO";
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--accent-premium);
            color: #000;
            font-size: 0.7rem;
            font-weight: bold;
            padding: 2px 10px;
            border-radius: 20px;
        }

        .locked-feature {
            position: relative;
            filter: blur(2px);
            pointer-events: none;
            user-select: none;
        }

        .locked-feature::after {
            content: "ðŸ”’ Premium Feature";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            color: var(--accent-premium);
            z-index: 10;
            white-space: nowrap;
        }

        .bento-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
        }
        .bento-item-large { grid-column: span 2; grid-row: span 2; }
        .bento-item-wide { grid-column: span 2; }
        
        @media (max-width: 992px) { .bento-grid { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 576px) { 
            .bento-grid { grid-template-columns: 1fr; }
            .bento-item-large, .bento-item-wide { grid-column: span 1; }
        }

        .btn-indigo { 
            background: var(--accent-indigo); 
            color: white; 
            border-radius: 14px; 
            border: none; 
            padding: 10px 20px; 
            font-weight: 600; 
            transition: all 0.3s ease;
        }
        .btn-indigo:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(99, 102, 241, 0.3);
        }

        .btn-premium { 
            background: linear-gradient(135deg, #F59E0B, #8B5CF6); 
            color: white; 
            border-radius: 14px; 
            border: none; 
            padding: 12px 24px; 
            font-weight: 700;
            transition: transform 0.3s ease;
        }
        .btn-premium:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(245, 158, 11, 0.3);
        }

        .stat-badge { 
            font-size: 0.65rem; 
            text-transform: uppercase; 
            letter-spacing: 1.2px; 
            color: #94A3B8; 
        }
        .section-hidden { display: none; }
        .pointer { cursor: pointer; }
        
        .badge-skill {
            background: linear-gradient(135deg, var(--accent-emerald), #059669);
            padding: 6px 14px;
            border-radius: 100px;
            font-size: 0.75rem;
            margin: 4px;
            display: inline-flex;
            align-items: center;
        }

        .pricing-card {
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .pricing-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-indigo);
        }

        .feature-list {
            list-style: none;
            padding: 0;
        }

        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .feature-list li:last-child {
            border-bottom: none;
        }

        .feature-list .bi-check-circle {
            color: var(--accent-emerald);
            margin-right: 10px;
        }

        .feature-list .bi-x-circle {
            color: #EF4444;
            margin-right: 10px;
        }

        .payment-option {
            padding: 15px;
            border: 2px solid var(--glass-border);
            border-radius: 12px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .payment-option:hover {
            border-color: var(--accent-indigo);
            background: rgba(99, 102, 241, 0.1);
        }

        .payment-option.selected {
            border-color: var(--accent-emerald);
            background: rgba(16, 185, 129, 0.1);
        }

        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1050;
            padding: 12px 20px;
            border-radius: 12px;
            font-weight: 500;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .premium-unlocked {
            border: 2px solid var(--accent-premium);
            box-shadow: 0 0 20px rgba(245, 158, 11, 0.3);
        }
    </style>
</head>
<body>

    <!-- Navigation Bar -->
    <nav class="navbar navbar-dark pt-4 pb-4 section-hidden" id="main-nav">
        <div class="container">
            <span class="navbar-brand fw-bold fs-4"><i class="bi bi-layers-half me-2"></i>InternHub</span>
            <div class="d-flex align-items-center gap-3">
                <div class="text-end d-none d-md-block">
                    <div id="nav-user-name" class="fw-bold small d-flex align-items-center gap-2">
                        <span id="user-display-name">User</span>
                        <span id="user-tier-badge" class="badge bg-secondary">Free</span>
                    </div>
                    <div id="quote-display" class="text-secondary" style="font-size: 0.7rem;"></div>
                </div>
                <button class="btn btn-outline-info btn-sm rounded-pill px-3" onclick="showPricing()">
                    <i class="bi bi-gem me-1"></i>Upgrade
                </button>
                <button class="btn btn-outline-danger btn-sm rounded-pill px-3" onclick="logout()">Logout</button>
            </div>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="container pb-5">
        
        <!-- Authentication Section -->
        <section id="auth-section" class="mx-auto" style="max-width: 400px; margin-top: 100px;">
            <div class="glass-card">
                <h3 id="auth-title" class="fw-bold text-center mb-4 text-white">Hello!</h3>
                <div id="login-form">
                    <input type="email" id="login-email" class="form-control mb-3 py-2" placeholder="Email">
                    <input type="password" id="login-password" class="form-control mb-3 py-2" placeholder="Password">
                    <button class="btn btn-indigo w-100 py-3" onclick="login()">Masuk ke Dashboard</button>
                    <p class="text-center mt-3 small text-secondary">Baru di sini? <a href="#" class="text-info text-decoration-none" onclick="toggleAuth(false)">Daftar Akun</a></p>
                    <div class="text-center mt-3">
                        <button class="btn btn-outline-warning btn-sm w-100" onclick="showPricing()">
                            <i class="bi bi-gem me-2"></i>Lihat Paket Premium
                        </button>
                    </div>
                </div>
                <div id="register-form" class="section-hidden">
                    <input type="text" id="reg-name" class="form-control mb-3 py-2" placeholder="Nama Panggilan">
                    <input type="email" id="reg-email" class="form-control mb-3 py-2" placeholder="Email">
                    <input type="password" id="reg-password" class="form-control mb-3 py-2" placeholder="Password (Min. 6 Karakter)">
                    <button class="btn btn-indigo w-100 py-3" onclick="register()">Mulai Magang</button>
                    <p class="text-center mt-3 small text-secondary">Sudah ada akun? <a href="#" class="text-info text-decoration-none" onclick="toggleAuth(true)">Login</a></p>
                </div>
            </div>
        </section>

        <!-- Dashboard Section -->
        <section id="dashboard-section" class="section-hidden">
            <div class="row g-4 mb-4">
                <div class="col-6 col-md-3">
                    <div class="glass-card py-3">
                        <div class="stat-badge">Total Logs</div>
                        <h2 id="stat-logs" class="fw-bold mb-0">0</h2>
                    </div>
                </div>
                <div class="col-6 col-md-3">
                    <div class="glass-card py-3">
                        <div class="stat-badge">Skills</div>
                        <h2 id="stat-skills" class="fw-bold mb-0">0</h2>
                    </div>
                </div>
                <div class="col-6 col-md-3">
                    <div class="glass-card py-3 border-info border-opacity-25">
                        <div class="stat-badge text-info">Days Left</div>
                        <h2 id="stat-days" class="fw-bold mb-0 text-info">0</h2>
                    </div>
                </div>
                <div class="col-6 col-md-3">
                    <div class="glass-card py-3">
                        <div class="stat-badge">Progress</div>
                        <h2 id="stat-pct" class="fw-bold mb-0">0%</h2>
                    </div>
                </div>
            </div>

            <div class="bento-grid">
                <!-- Progress Tracker -->
                <div class="glass-card bento-item-wide" id="progress-card">
                    <h6 class="fw-bold mb-3"><i class="bi bi-rocket-takeoff me-2"></i>Internship Progress</h6>
                    <div class="progress mb-3" style="height: 10px; background: rgba(255,255,255,0.05);">
                        <div id="tracker-bar" class="progress-bar progress-bar-striped progress-bar-animated" style="width: 0%; background: var(--accent-indigo);"></div>
                    </div>
                    <p id="tracker-text" class="small mb-0 text-secondary fw-semibold"></p>
                </div>

                <!-- Logbook -->
                <div class="glass-card bento-item-large d-flex flex-column" id="logbook-card">
                    <div class="d-flex justify-content-between mb-4">
                        <h6 class="fw-bold mb-0 text-white">Daily Logbook</h6>
                        <div>
                            <span class="badge bg-primary bg-opacity-25 text-info small pointer me-2" onclick="copyToClipboard()">Salin Semua</span>
                            <span id="log-limit-badge" class="badge bg-warning text-dark small">0/âˆž logs</span>
                        </div>
                    </div>
                    <div class="mb-4">
                        <input type="text" id="log-task" class="form-control mb-2 py-2" placeholder="Judul tugas hari ini...">
                        <textarea id="log-desc" class="form-control mb-3 py-2" rows="2" placeholder="Ceritakan detail pengerjaannya..."></textarea>
                        <button class="btn btn-indigo w-100 py-2" onclick="addLog()">Simpan Aktivitas</button>
                    </div>
                    <div id="log-container" class="overflow-auto pe-2" style="max-height: 400px;"></div>
                </div>

                <!-- Analytics (Premium) -->
                <div class="glass-card premium-card" id="analytics-card">
                    <h6 class="fw-bold mb-3 text-white"><i class="bi bi-graph-up me-2"></i>Advanced Analytics</h6>
                    <div class="mb-3 text-center">
                        <i class="bi bi-bar-chart display-4 text-warning mb-3"></i>
                        <p class="small text-secondary">Analisis produktivitas harian dan rekomendasi perbaikan</p>
                    </div>
                    <div class="text-center" id="analytics-button-container">
                        <button class="btn btn-premium btn-sm" onclick="showPricing()">
                            <i class="bi bi-gem me-2"></i>Unlock Analytics
                        </button>
                    </div>
                </div>

                <!-- Work Directory -->
                <div class="glass-card" id="work-directory-card">
                    <h6 class="fw-bold mb-3 text-white">Work Directory</h6>
                    <div class="mb-3">
                        <input type="text" id="contact-name" class="form-control form-control-sm mb-2" placeholder="Nama Orang">
                        <input type="text" id="contact-info" class="form-control form-control-sm mb-2" placeholder="Jabatan/Kontak">
                        <button class="btn btn-outline-light btn-sm w-100 rounded-pill" onclick="addContact()">Tambah</button>
                    </div>
                    <div id="contact-container" class="overflow-auto" style="max-height: 150px;"></div>
                </div>

                <!-- Skills -->
                <div class="glass-card" id="skill-card">
                    <h6 class="fw-bold mb-2 text-white">Skill Learned</h6>
                    <div class="input-group mb-3">
                        <input type="text" id="skill-input" class="form-control form-control-sm" placeholder="Contoh: Excel Expert">
                        <button class="btn btn-indigo btn-sm px-3" onclick="addSkill()"><i class="bi bi-plus-lg"></i></button>
                    </div>
                    <div id="skill-container"></div>
                </div>

                <!-- Export & Settings -->
                <div class="glass-card bento-item-wide d-flex flex-wrap align-items-center justify-content-between gap-3" id="export-card">
                    <div class="d-flex gap-4">
                        <div>
                            <label class="stat-badge d-block mb-1">Mulai Magang</label>
                            <input type="date" id="start-date-input" class="form-control form-control-sm" onchange="updateProfile()">
                        </div>
                        <div>
                            <label class="stat-badge d-block mb-1 text-info">Total Hari</label>
                            <input type="number" id="duration-input" class="form-control form-control-sm border-info" onchange="updateProfile()" style="width: 100px;">
                        </div>
                        <div>
                            <label class="stat-badge d-block mb-1">Tier Akun</label>
                            <div id="user-tier" class="fw-bold text-warning">Free</div>
                        </div>
                    </div>
                    <div class="d-flex gap-2">
                        <button class="btn btn-success rounded-pill px-4 fw-bold" onclick="exportData()">Export .TXT</button>
                        <button class="btn btn-premium rounded-pill px-4 fw-bold" onclick="showPricing()">
                            <i class="bi bi-gem me-2"></i>Upgrade
                        </button>
                    </div>
                </div>

                <!-- AI Coach (Premium) -->
                <div class="glass-card premium-card" id="ai-coach-card">
                    <h6 class="fw-bold mb-3 text-white"><i class="bi bi-robot me-2"></i>AI Career Coach</h6>
                    <div id="ai-coach-content">
                        <p class="small text-secondary mb-3">Dapatkan saran karir personal dari AI</p>
                        <div class="text-center" id="ai-coach-button-container">
                            <button class="btn btn-premium btn-sm" onclick="showPricing()">
                                <i class="bi bi-gem me-2"></i>Unlock AI Coach
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Pricing Section -->
        <section id="pricing-section" class="section-hidden mx-auto" style="max-width: 1000px;">
            <div class="text-center mb-5">
                <h2 class="fw-bold mb-3">Upgrade InternHub Experience</h2>
                <p class="text-secondary">Pilih paket yang sesuai dengan kebutuhan magang Anda</p>
                <button class="btn btn-outline-light btn-sm" onclick="backToDashboard()">
                    <i class="bi bi-arrow-left me-2"></i>Kembali ke Dashboard
                </button>
            </div>

            <div class="row g-4">
                <!-- Free Plan -->
                <div class="col-md-4">
                    <div class="glass-card pricing-card h-100">
                        <div class="text-center mb-4">
                            <h4 class="fw-bold">Free</h4>
                            <div class="display-4 fw-bold">Rp 0</div>
                            <p class="text-secondary">/selamanya</p>
                        </div>
                        <ul class="feature-list">
                            <li><i class="bi bi-check-circle"></i> 10 Logbook harian</li>
                            <li><i class="bi bi-check-circle"></i> 5 Kontak kerja</li>
                            <li><i class="bi bi-check-circle"></i> 8 Skill tracking</li>
                            <li><i class="bi bi-x-circle"></i> Analytics lanjutan</li>
                            <li><i class="bi bi-x-circle"></i> AI Career Coach</li>
                            <li><i class="bi bi-x-circle"></i> Export PDF & Excel</li>
                            <li><i class="bi bi-x-circle"></i> Backup cloud</li>
                            <li><i class="bi bi-x-circle"></i> Prioritas support</li>
                        </ul>
                        <button class="btn btn-outline-light w-100 mt-4" onclick="selectPlan('free')">Paket Saat Ini</button>
                    </div>
                </div>

                <!-- Pro Monthly -->
                <div class="col-md-4">
                    <div class="premium-card pricing-card h-100">
                        <div class="text-center mb-4">
                            <span class="badge bg-warning text-dark mb-2">POPULER</span>
                            <h4 class="fw-bold">Pro Monthly</h4>
                            <div class="display-4 fw-bold">Rp 49.000</div>
                            <p class="text-secondary">/bulan</p>
                        </div>
                        <ul class="feature-list">
                            <li><i class="bi bi-check-circle"></i> Logbook tanpa batas</li>
                            <li><i class="bi bi-check-circle"></i> Kontak tanpa batas</li>
                            <li><i class="bi bi-check-circle"></i> Skill tanpa batas</li>
                            <li><i class="bi bi-check-circle"></i> Analytics lanjutan</li>
                            <li><i class="bi bi-check-circle"></i> AI Career Coach</li>
                            <li><i class="bi bi-check-circle"></i> Export PDF & Excel</li>
                            <li><i class="bi bi-x-circle"></i> Backup cloud</li>
                            <li><i class="bi bi-check-circle"></i> Prioritas support</li>
                        </ul>
                        <button class="btn btn-premium w-100 mt-4" onclick="selectPlan('pro_monthly')">Upgrade Sekarang</button>
                    </div>
                </div>

                <!-- Pro Annual -->
                <div class="col-md-4">
                    <div class="premium-card pricing-card h-100">
                        <div class="text-center mb-4">
                            <h4 class="fw-bold">Pro Annual</h4>
                            <div class="display-4 fw-bold">Rp 450.000</div>
                            <p class="text-secondary">/tahun <span class="text-success">(Hemat 23%)</span></p>
                        </div>
                        <ul class="feature-list">
                            <li><i class="bi bi-check-circle"></i> Semua fitur Pro Monthly</li>
                            <li><i class="bi bi-check-circle"></i> Backup cloud otomatis</li>
                            <li><i class="bi bi-check-circle"></i> Template logbook premium</li>
                            <li><i class="bi bi-check-circle"></i> Sertifikat kelulusan</li>
                            <li><i class="bi bi-check-circle"></i> Portfolio builder</li>
                            <li><i class="bi bi-check-circle"></i> Network sharing</li>
                            <li><i class="bi bi-check-circle"></i> Job matching</li>
                            <li><i class="bi bi-check-circle"></i> 24/7 Priority support</li>
                        </ul>
                        <button class="btn btn-premium w-100 mt-4" onclick="selectPlan('pro_annual')">Pilih Paket Tahunan</button>
                    </div>
                </div>
            </div>

            <!-- Payment Methods -->
            <div class="glass-card mt-5">
                <h5 class="fw-bold mb-3">Pembayaran Aman & Mudah</h5>
                <div class="row text-center">
                    <div class="col-3">
                        <i class="bi bi-shield-check display-6 text-success"></i>
                        <p class="small mt-2">SSL Secure</p>
                    </div>
                    <div class="col-3">
                        <i class="bi bi-credit-card display-6 text-info"></i>
                        <p class="small mt-2">Kartu Kredit</p>
                    </div>
                    <div class="col-3">
                        <i class="bi bi-wallet2 display-6 text-warning"></i>
                        <p class="small mt-2">E-Wallet</p>
                    </div>
                    <div class="col-3">
                        <i class="bi bi-bank display-6 text-primary"></i>
                        <p class="small mt-2">Transfer Bank</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Payment Section -->
        <section id="payment-section" class="section-hidden mx-auto" style="max-width: 500px;">
            <div class="glass-card">
                <button class="btn btn-outline-light btn-sm mb-4" onclick="backToPricing()">
                    <i class="bi bi-arrow-left me-2"></i>Kembali ke Paket
                </button>
                <h4 class="fw-bold mb-4" id="selected-plan-title">Pro Monthly</h4>
                
                <!-- Payment Methods -->
                <div class="mb-4">
                    <label class="form-label mb-3">Pilih Metode Pembayaran</label>
                    <div class="payment-option" onclick="selectPaymentMethod('credit_card')">
                        <div class="d-flex align-items-center">
                            <i class="bi bi-credit-card fs-4 me-3 text-info"></i>
                            <div>
                                <h6 class="mb-0">Kartu Kredit/Debit</h6>
                                <small class="text-secondary">Visa, Mastercard, JCB</small>
                            </div>
                        </div>
                    </div>
                    
                    <div class="payment-option" onclick="selectPaymentMethod('gopay')">
                        <div class="d-flex align-items-center">
                            <i class="bi bi-wallet fs-4 me-3 text-success"></i>
                            <div>
                                <h6 class="mb-0">GoPay</h6>
                                <small class="text-secondary">Dompet digital Gojek</small>
                            </div>
                        </div>
                    </div>
                    
                    <div class="payment-option" onclick="selectPaymentMethod('bank_transfer')">
                        <div class="d-flex align-items-center">
                            <i class="bi bi-bank fs-4 me-3 text-primary"></i>
                            <div>
                                <h6 class="mb-0">Transfer Bank</h6>
                                <small class="text-secondary">BCA, Mandiri, BRI, BNI</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Payment Details -->
                <div class="mb-4">
                    <div class="d-flex justify-content-between mb-2">
                        <span>Harga Paket</span>
                        <span id="plan-price">Rp 49.000</span>
                    </div>
                    <div class="d-flex justify-content-between mb-2">
                        <span>PPN 10%</span>
                        <span id="tax-amount">Rp 4.900</span>
                    </div>
                    <hr>
                    <div class="d-flex justify-content-between fw-bold">
                        <span>Total Pembayaran</span>
                        <span id="total-price">Rp 53.900</span>
                    </div>
                </div>

                <!-- Terms Agreement -->
                <div class="form-check mb-4">
                    <input class="form-check-input" type="checkbox" id="terms-agree">
                    <label class="form-check-label small" for="terms-agree">
                        Saya menyetujui <a href="#" class="text-info" onclick="showTerms()">Syarat & Ketentuan</a> dan 
                        <a href="#" class="text-info" onclick="showPrivacy()">Kebijakan Privasi</a> InternHub
                    </label>
                </div>

                <!-- Payment Button -->
                <button class="btn btn-premium w-100 py-3" onclick="processPayment()">
                    <i class="bi bi-lock-fill me-2"></i>Bayar Sekarang
                </button>
            </div>
        </section>
    </div>

    <script>
        // Inisialisasi Data
        let users = JSON.parse(localStorage.getItem('internhub_users')) || [];
        let currentUser = JSON.parse(localStorage.getItem('internhub_session')) || null;
        let logs = [], contacts = [], skills = [];
        let selectedPlan = null;
        let selectedPaymentMethod = 'credit_card';

        // Batasan untuk user free
        const FREE_LIMITS = {
            logs: 10,
            contacts: 5,
            skills: 8
        };

        // Harga paket
        const PRICING = {
            free: { 
                name: 'Free', 
                price: 0, 
                period: 'selamanya',
                features: ['10 Logbook', '5 Kontak', '8 Skills']
            },
            pro_monthly: { 
                name: 'Pro Monthly', 
                price: 49000, 
                period: 'bulan',
                features: ['Logbook Unlimited', 'Kontak Unlimited', 'Skills Unlimited', 'Analytics', 'AI Coach', 'Export PDF/Excel']
            },
            pro_annual: { 
                name: 'Pro Annual', 
                price: 450000, 
                period: 'tahun',
                features: ['Semua fitur Pro', 'Cloud Backup', 'Portfolio Builder', 'Job Matching', 'Priority Support']
            }
        };

        // Quotes untuk motivasi
        const quotes = [
            "Make every day count.", 
            "Small steps, big results.", 
            "Stay focused, stay humble.",
            "Your internship journey matters.",
            "Learn, grow, repeat."
        ];

        // Fungsi inisialisasi
        window.onload = () => {
            if (currentUser) {
                showDashboard();
            }
            document.getElementById('quote-display').innerText = quotes[Math.floor(Math.random() * quotes.length)];
        };

        // Toggle antara login dan register
        function toggleAuth(isLogin) {
            document.getElementById('login-form').classList.toggle('section-hidden', !isLogin);
            document.getElementById('register-form').classList.toggle('section-hidden', isLogin);
            document.getElementById('auth-title').innerText = isLogin ? 'Welcome Back!' : 'Join InternHub';
        }

        // Fungsi register
        function register() {
            const name = document.getElementById('reg-name').value;
            const email = document.getElementById('reg-email').value;
            const pass = document.getElementById('reg-password').value;
            
            if (!name || !email || pass.length < 6) {
                showToast("Harap isi semua data dengan benar! Password minimal 6 karakter.", "error");
                return;
            }
            
            // Cek apakah email sudah terdaftar
            if (users.find(u => u.email === email)) {
                showToast("Email sudah terdaftar! Silakan login.", "error");
                toggleAuth(true);
                return;
            }
            
            const newUser = { 
                name, 
                email, 
                pass: btoa(pass), 
                startDate: new Date().toISOString().split('T')[0], 
                duration: 90,
                tier: 'free',
                subscription: null,
                payment_history: [],
                created_at: new Date().toISOString()
            };
            
            users.push(newUser);
            localStorage.setItem('internhub_users', JSON.stringify(users));
            showToast("Registrasi berhasil! Silakan login.", "success");
            toggleAuth(true);
        }

        // Fungsi login
        function login() {
            const email = document.getElementById('login-email').value;
            const pass = document.getElementById('login-password').value;
            const user = users.find(u => u.email === email && u.pass === btoa(pass));
            
            if (user) {
                currentUser = user;
                localStorage.setItem('internhub_session', JSON.stringify(user));
                showDashboard();
            } else {
                showToast("Email atau Password salah!", "error");
            }
        }

        // Fungsi logout
        function logout() { 
            localStorage.removeItem('internhub_session'); 
            location.reload(); 
        }

        // Tampilkan dashboard
        function showDashboard() {
            document.getElementById('auth-section').classList.add('section-hidden');
            document.getElementById('pricing-section').classList.add('section-hidden');
            document.getElementById('payment-section').classList.add('section-hidden');
            document.getElementById('main-nav').classList.remove('section-hidden');
            document.getElementById('dashboard-section').classList.remove('section-hidden');
            
            // Update navbar
            document.getElementById('user-display-name').textContent = currentUser.name;
            
            // Load data user
            const key = currentUser.email.replace(/[@.]/g, '_');
            logs = JSON.parse(localStorage.getItem(`${key}_logs`)) || [];
            contacts = JSON.parse(localStorage.getItem(`${key}_contacts`)) || [];
            skills = JSON.parse(localStorage.getItem(`${key}_skills`)) || [];
            
            // Set initial values
            document.getElementById('start-date-input').value = currentUser.startDate;
            document.getElementById('duration-input').value = currentUser.duration;
            
            refreshUI();
            updateTierUI();
        }

        // Update UI berdasarkan tier
        function updateTierUI() {
            const isPremium = currentUser.tier !== 'free';
            
            // Update badge tier
            const tierBadge = document.getElementById('user-tier-badge');
            const userTierDisplay = document.getElementById('user-tier');
            
            if (isPremium) {
                tierBadge.className = 'badge bg-warning';
                tierBadge.textContent = 'Premium';
                userTierDisplay.textContent = 'Premium';
                userTierDisplay.className = 'fw-bold text-warning';
                
                // Update log limit badge untuk premium
                document.getElementById('log-limit-badge').textContent = `${logs.length}/âˆž logs`;
                document.getElementById('log-limit-badge').className = 'badge bg-success text-dark small';
                
                // Unlock premium features
                unlockPremiumFeatures();
                
            } else {
                tierBadge.className = 'badge bg-secondary';
                tierBadge.textContent = 'Free';
                userTierDisplay.textContent = 'Free';
                userTierDisplay.className = 'fw-bold text-secondary';
                
                // Update log limit badge untuk free
                document.getElementById('log-limit-badge').textContent = `${logs.length}/${FREE_LIMITS.logs} logs`;
                document.getElementById('log-limit-badge').className = `badge ${logs.length >= FREE_LIMITS.logs ? 'bg-danger' : 'bg-warning'} text-dark small`;
                
                // Lock premium features
                lockPremiumFeatures();
            }
        }

        // Unlock semua fitur premium
        function unlockPremiumFeatures() {
            // Analytics Card
            const analyticsCard = document.getElementById('analytics-card');
            analyticsCard.classList.remove('locked-feature');
            analyticsCard.classList.add('premium-unlocked');
            
            // Update analytics button
            const analyticsButtonContainer = document.getElementById('analytics-button-container');
            analyticsButtonContainer.innerHTML = `
                <button class="btn btn-success btn-sm">
                    <i class="bi bi-unlock me-2"></i>Analytics Active
                </button>
                <div class="mt-3">
                    <canvas id="productivityChart" width="200" height="100"></canvas>
                </div>
            `;
            
            // AI Coach Card
            const aiCoachCard = document.getElementById('ai-coach-card');
            aiCoachCard.classList.remove('locked-feature');
            aiCoachCard.classList.add('premium-unlocked');
            
            // Update AI Coach content
            const aiCoachContent = document.getElementById('ai-coach-content');
            aiCoachContent.innerHTML = `
                <div class="mb-3">
                    <p class="small text-success mb-2"><i class="bi bi-check-circle me-1"></i> AI Coach Active</p>
                    <input type="text" class="form-control form-control-sm mb-2" placeholder="Tanyakan pada AI coach...">
                    <button class="btn btn-sm btn-outline-info w-100">Dapatkan Saran</button>
                </div>
                <div class="text-center">
                    <small class="text-secondary">Powered by AI Assistant</small>
                </div>
            `;
            
            // Update upgrade button menjadi manage subscription
            const upgradeButtons = document.querySelectorAll('button[onclick="showPricing()"]');
            upgradeButtons.forEach(btn => {
                if (btn.textContent.includes('Upgrade')) {
                    btn.innerHTML = '<i class="bi bi-gear me-2"></i>Manage';
                    btn.onclick = () => showSubscriptionDetails();
                }
            });
        }

        // Lock fitur premium
        function lockPremiumFeatures() {
            // Analytics Card
            const analyticsCard = document.getElementById('analytics-card');
            analyticsCard.classList.add('locked-feature');
            analyticsCard.classList.remove('premium-unlocked');
            
            // Reset analytics button
            const analyticsButtonContainer = document.getElementById('analytics-button-container');
            analyticsButtonContainer.innerHTML = `
                <button class="btn btn-premium btn-sm" onclick="showPricing()">
                    <i class="bi bi-gem me-2"></i>Unlock Analytics
                </button>
            `;
            
            // AI Coach Card
            const aiCoachCard = document.getElementById('ai-coach-card');
            aiCoachCard.classList.add('locked-feature');
            aiCoachCard.classList.remove('premium-unlocked');
            
            // Reset AI Coach content
            const aiCoachContent = document.getElementById('ai-coach-content');
            aiCoachContent.innerHTML = `
                <p class="small text-secondary mb-3">Dapatkan saran karir personal dari AI</p>
                <div class="text-center" id="ai-coach-button-container">
                    <button class="btn btn-premium btn-sm" onclick="showPricing()">
                        <i class="bi bi-gem me-2"></i>Unlock AI Coach
                    </button>
                </div>
            `;
        }

        // Show subscription details
        function showSubscriptionDetails() {
            if (currentUser.subscription) {
                const sub = currentUser.subscription;
                const endDate = new Date(sub.end_date).toLocaleDateString('id-ID');
                alert(`Detail Langganan:\n\nPaket: ${sub.plan}\nBerlaku sampai: ${endDate}\nMetode Pembayaran: ${sub.payment_method}\nID Transaksi: ${sub.payment_id}`);
            } else {
                showToast("Anda belum memiliki langganan aktif.", "info");
                showPricing();
            }
        }

        // Refresh UI
        function refreshUI() {
            const start = new Date(currentUser.startDate);
            start.setHours(0,0,0,0);
            const totalTargetDays = parseInt(currentUser.duration) || 1;
            const today = new Date();
            today.setHours(0,0,0,0);

            let elapsed = Math.floor((today - start) / 86400000);
            if (elapsed < 0) elapsed = 0; 
            let remaining = totalTargetDays - elapsed;
            if (remaining < 0) remaining = 0;
            const pct = Math.min(100, Math.round((elapsed / totalTargetDays) * 100));

            // Update statistics
            document.getElementById('stat-logs').innerText = logs.length;
            document.getElementById('stat-skills').innerText = skills.length;
            document.getElementById('stat-days').innerText = remaining;
            document.getElementById('stat-pct').innerText = pct + '%';
            document.getElementById('tracker-bar').style.width = pct + '%';
            
            // Update progress text
            const tText = document.getElementById('tracker-text');
            if (today < start) {
                tText.innerHTML = `Mulai dalam ${Math.floor((start-today)/86400000)} hari lagi.`;
            } else if (elapsed >= totalTargetDays) {
                tText.innerHTML = `Selamat! Target ${totalTargetDays} hari tercapai! ðŸŽ‰`;
            } else {
                tText.innerText = `Berjalan ${elapsed}/${totalTargetDays} hari. Sisa ${remaining} hari lagi!`;
            }

            renderLogs(); 
            renderContacts(); 
            renderSkills();
            updateTierUI();
        }

        // Render logs
        function renderLogs() {
            const logContainer = document.getElementById('log-container');
            if (logs.length === 0) {
                logContainer.innerHTML = `
                    <div class="text-center py-5 text-secondary">
                        <i class="bi bi-journal-check display-4 mb-3"></i>
                        <p>Belum ada logbook. Mulai tambahkan aktivitas harian Anda!</p>
                    </div>
                `;
                return;
            }

            logContainer.innerHTML = logs.map((l, i) => `
                <div class="p-3 mb-3 border border-secondary border-opacity-10 rounded-4 glass-card">
                    <div class="d-flex justify-content-between">
                        <span class="fw-bold text-info small">${l.task}</span>
                        <i class="bi bi-trash3 pointer text-danger opacity-50" onclick="deleteItem('log', ${i})"></i>
                    </div>
                    <div class="stat-badge mb-2" style="font-size:0.6rem">${l.date}</div>
                    <p class="small mb-0 opacity-75">${l.desc}</p>
                </div>
            `).join('');
        }

        // Render contacts
        function renderContacts() {
            const contactContainer = document.getElementById('contact-container');
            if (contacts.length === 0) {
                contactContainer.innerHTML = `
                    <div class="text-center py-3 text-secondary small">
                        <i class="bi bi-person-plus"></i> Tambahkan kontak kerja Anda
                    </div>
                `;
                return;
            }

            contactContainer.innerHTML = contacts.map((c, i) => `
                <div class="mb-2 p-2 rounded-3 bg-white bg-opacity-5 small d-flex justify-content-between align-items-center">
                    <div><b>${c.name}</b><br><span class="text-secondary" style="font-size: 0.65rem;">${c.info}</span></div>
                    <i class="bi bi-x-circle text-danger pointer" onclick="deleteItem('contact', ${i})"></i>
                </div>
            `).join('');
        }

        // Render skills
        function renderSkills() {
            const skillContainer = document.getElementById('skill-container');
            if (skills.length === 0) {
                skillContainer.innerHTML = `
                    <div class="text-center py-3 text-secondary small">
                        <i class="bi bi-lightbulb"></i> Tambahkan skill yang dipelajari
                    </div>
                `;
                return;
            }

            skillContainer.innerHTML = skills.map((s, i) => `
                <span class="badge-skill">${s} <i class="bi bi-x ms-2 pointer" onclick="deleteItem('skill', ${i})"></i></span>
            `).join('');
        }

        // Tambah log
        function addLog() {
            if (currentUser.tier === 'free' && logs.length >= FREE_LIMITS.logs) {
                showToast(`Batas logbook untuk akun Free hanya ${FREE_LIMITS.logs}. Upgrade ke Premium!`, "warning");
                showPricing();
                return;
            }

            const task = document.getElementById('log-task').value;
            const desc = document.getElementById('log-desc').value;
            
            if (!task.trim()) {
                showToast("Judul tugas tidak boleh kosong!", "error");
                return;
            }
            
            logs.unshift({ 
                task, 
                desc, 
                date: new Date().toLocaleDateString('id-ID', {day:'numeric', month:'short', year:'numeric'})
            });
            
            save('logs', logs);
            document.getElementById('log-task').value = '';
            document.getElementById('log-desc').value = '';
            
            showToast('Logbook berhasil disimpan!', 'success');
        }

        // Tambah kontak
        function addContact() {
            if (currentUser.tier === 'free' && contacts.length >= FREE_LIMITS.contacts) {
                showToast(`Batas kontak untuk akun Free hanya ${FREE_LIMITS.contacts}. Upgrade ke Premium!`, "warning");
                showPricing();
                return;
            }

            const name = document.getElementById('contact-name').value;
            const info = document.getElementById('contact-info').value;
            
            if (!name.trim()) {
                showToast("Nama kontak tidak boleh kosong!", "error");
                return;
            }
            
            contacts.push({ name, info });
            save('contacts', contacts);
            document.getElementById('contact-name').value = '';
            document.getElementById('contact-info').value = '';
            
            showToast('Kontak berhasil ditambahkan!', 'success');
        }

        // Tambah skill
        function addSkill() {
            if (currentUser.tier === 'free' && skills.length >= FREE_LIMITS.skills) {
                showToast(`Batas skill untuk akun Free hanya ${FREE_LIMITS.skills}. Upgrade ke Premium!`, "warning");
                showPricing();
                return;
            }

            const val = document.getElementById('skill-input').value.trim();
            
            if (!val) {
                showToast("Nama skill tidak boleh kosong!", "error");
                return;
            }
            
            skills.push(val);
            save('skills', skills);
            document.getElementById('skill-input').value = '';
            
            showToast('Skill berhasil ditambahkan!', 'success');
        }

        // Save data ke localStorage
        function save(k, d) {
            const key = currentUser.email.replace(/[@.]/g, '_');
            localStorage.setItem(`${key}_${k}`, JSON.stringify(d));
            refreshUI();
        }

        // Hapus item
        function deleteItem(type, i) {
            if (!confirm("Apakah Anda yakin ingin menghapus data ini?")) return;
            
            if (type === 'log') {
                logs.splice(i, 1);
                save('logs', logs);
            } else if (type === 'contact') {
                contacts.splice(i, 1);
                save('contacts', contacts);
            } else if (type === 'skill') {
                skills.splice(i, 1);
                save('skills', skills);
            }
            
            showToast('Data berhasil dihapus!', 'info');
        }

        // Export data
        function exportData() {
            let txt = `INTERNHUB REPORT: ${currentUser.name}\n`;
            txt += `Tanggal: ${new Date().toLocaleDateString('id-ID')}\n`;
            txt += `Tier: ${currentUser.tier}\n`;
            txt += `Progress: ${document.getElementById('stat-pct').innerText}\n\n`;
            
            txt += `LOGBOOK HARIAN:\n${'='.repeat(40)}\n`;
            logs.forEach((l, i) => {
                txt += `\n[${i+1}] ${l.date} - ${l.task}\n`;
                txt += `   ${l.desc}\n`;
            });
            
            txt += `\n\nKONTAK KERJA:\n${'='.repeat(40)}\n`;
            contacts.forEach(c => {
                txt += `\n${c.name}\n`;
                txt += `   ${c.info}\n`;
            });
            
            txt += `\n\nSKILL YANG DIPELAJARI:\n${'='.repeat(40)}\n`;
            skills.forEach((s, i) => {
                txt += `${i+1}. ${s}\n`;
            });
            
            const blob = new Blob([txt], { type: 'text/plain;charset=utf-8' });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = `InternHub_Report_${currentUser.name}_${new Date().toISOString().split('T')[0]}.txt`;
            a.click();
            
            showToast('Data berhasil diexport!', 'success');
        }

        // Copy to clipboard
        function copyToClipboard() {
            const txt = logs.map(l => `[${l.date}] ${l.task}: ${l.desc}`).join('\n');
            navigator.clipboard.writeText(txt).then(() => {
                showToast('Logbook berhasil disalin ke clipboard!', 'success');
            });
        }

        // Update profile
        function updateProfile() {
            currentUser.startDate = document.getElementById('start-date-input').value;
            currentUser.duration = document.getElementById('duration-input').value;
            
            const idx = users.findIndex(u => u.email === currentUser.email);
            if (idx !== -1) {
                users[idx] = currentUser;
                localStorage.setItem('internhub_users', JSON.stringify(users));
                localStorage.setItem('internhub_session', JSON.stringify(currentUser));
            }
            
            refreshUI();
            showToast('Profile berhasil diupdate!', 'success');
        }

        // Show pricing section
        function showPricing() {
            document.getElementById('auth-section').classList.add('section-hidden');
            document.getElementById('dashboard-section').classList.add('section-hidden');
            document.getElementById('payment-section').classList.add('section-hidden');
            document.getElementById('main-nav').classList.add('section-hidden');
            document.getElementById('pricing-section').classList.remove('section-hidden');
        }

        // Select plan
        function selectPlan(plan) {
            if (plan === 'free') {
                if (currentUser.tier === 'free') {
                    showToast('Anda sudah menggunakan paket Free', 'info');
                } else {
                    showToast('Downgrade ke Free berhasil', 'info');
                    currentUser.tier = 'free';
                    currentUser.subscription = null;
                    saveUserData();
                    backToDashboard();
                }
                return;
            }
            
            selectedPlan = plan;
            document.getElementById('pricing-section').classList.add('section-hidden');
            document.getElementById('payment-section').classList.remove('section-hidden');
            
            // Update payment details
            const planData = PRICING[plan];
            const price = planData.price;
            const tax = Math.round(price * 0.1);
            const total = price + tax;
            
            document.getElementById('selected-plan-title').textContent = planData.name;
            document.getElementById('plan-price').textContent = `Rp ${price.toLocaleString('id-ID')}`;
            document.getElementById('tax-amount').textContent = `Rp ${tax.toLocaleString('id-ID')}`;
            document.getElementById('total-price').textContent = `Rp ${total.toLocaleString('id-ID')}`;
            
            // Reset payment method selection
            selectPaymentMethod('credit_card');
        }

        // Select payment method
        function selectPaymentMethod(method) {
            selectedPaymentMethod = method;
            
            // Remove all selected classes
            document.querySelectorAll('.payment-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // Add selected class to clicked option
            event.currentTarget.classList.add('selected');
        }

        // Process payment
        function processPayment() {
            if (!document.getElementById('terms-agree').checked) {
                showToast('Anda harus menyetujui Syarat & Ketentuan terlebih dahulu!', 'error');
                return;
            }
            
            if (!selectedPlan) {
                showToast('Silakan pilih paket terlebih dahulu!', 'error');
                return;
            }
            
            // Simulasikan proses pembayaran
            const planData = PRICING[selectedPlan];
            const paymentId = 'PAY-' + Math.random().toString(36).substr(2, 9).toUpperCase();
            
            // Update user data
            currentUser.tier = selectedPlan;
            currentUser.subscription = {
                plan: selectedPlan,
                start_date: new Date().toISOString(),
                end_date: selectedPlan === 'pro_annual' 
                    ? new Date(Date.now() + 365 * 24 * 60 * 60 * 1000).toISOString()
                    : new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString(),
                payment_method: selectedPaymentMethod,
                payment_id: paymentId
            };
            
            if (!currentUser.payment_history) {
                currentUser.payment_history = [];
            }
            
            currentUser.payment_history.push({
                date: new Date().toISOString(),
                amount: planData.price,
                plan: selectedPlan,
                payment_id: paymentId
            });
            
            // Save user data
            saveUserData();
            
            // Show success message
            showToast(`ðŸŽ‰ Pembayaran berhasil! Paket ${planData.name} telah aktif.`, 'success');
            
            // Back to dashboard
            setTimeout(() => {
                backToDashboard();
            }, 1500);
        }

        // Save user data
        function saveUserData() {
            const idx = users.findIndex(u => u.email === currentUser.email);
            if (idx !== -1) {
                users[idx] = currentUser;
                localStorage.setItem('internhub_users', JSON.stringify(users));
                localStorage.setItem('internhub_session', JSON.stringify(currentUser));
            }
        }

        // Back to dashboard
        function backToDashboard() {
            showDashboard();
        }

        // Back to pricing
        function backToPricing() {
            showPricing();
        }

        // Show terms
        function showTerms() {
            alert('Syarat & Ketentuan:\n\n1. Layanan ini untuk tujuan magang/pelatihan\n2. Data pengguna disimpan di browser lokal\n3. Pembayaran tidak dapat dikembalikan\n4. Pengguna bertanggung jawab atas data yang dimasukkan\n\nHubungi: support@internhub.com');
        }

        // Show privacy
        function showPrivacy() {
            alert('Kebijakan Privasi:\n\n1. Data disimpan di browser lokal pengguna\n2. Tidak ada data yang dikirim ke server\n3. Pengguna memiliki kontrol penuh atas datanya\n4. Data dapat diexport kapan saja\n\nPrivasi Anda adalah prioritas kami.');
        }

        // Toast notification
        function showToast(message, type) {
            // Remove existing toast
            const existingToast = document.querySelector('.toast');
            if (existingToast) existingToast.remove();
            
            // Create toast element
            const toast = document.createElement('div');
            toast.className = `toast ${
                type === 'success' ? 'bg-success' : 
                type === 'error' ? 'bg-danger' : 
                type === 'warning' ? 'bg-warning' : 
                'bg-info'
            }`;
            
            toast.innerHTML = `
                <div class="d-flex align-items-center">
                    <i class="bi bi-${
                        type === 'success' ? 'check-circle' : 
                        type === 'error' ? 'exclamation-circle' : 
                        type === 'warning' ? 'exclamation-triangle' : 
                        'info-circle'
                    } me-2"></i>
                    <span>${message}</span>
                </div>
            `;
            
            // Add to body
            document.body.appendChild(toast);
            
            // Remove after 3 seconds
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transition = 'opacity 0.3s';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }
    </script>
</body>
</html>